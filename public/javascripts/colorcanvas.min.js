(function(){this.ColorCanvas=function(a){return new ColorCanvas.Picker(a)}}).call(this),function(){var a,b,c,d,e,f=[].slice,g=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b={bind:function(a,b){var c,d,e,f,g;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},one:function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},trigger:function(){var a,b,c,d,e,g,h;a=1<=arguments.length?f.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((h=this._callbacks)!=null?h[c]:void 0);if(!d)return;for(e=0,g=d.length;e<g;e++){b=d[e];if(b.apply(this,a)===!1)break}return!0},unbind:function(a,b){var c,d,e,f,g,h;if(!a)return this._callbacks={},this;e=(h=this._callbacks)!=null?h[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=f=0,g=e.length;f<g;d=++f){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this}},e=["included","extended"],c=function(){function a(){typeof this.init=="function"&&this.init.apply(this,arguments)}return a.name="Module",a.include=function(a){var b,c,d;if(!a)throw"include(obj) requires obj";for(b in a)c=a[b],g.call(e,b)<0&&(this.prototype[b]=c);return(d=a.included)!=null&&d.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw"extend(obj) requires obj";for(b in a)c=a[b],g.call(e,b)<0&&(this[b]=c);return(d=a.extended)!=null&&d.apply(this),this},a.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a}(),a=function(a){function c(a){this.release=h(this.release,this);var b,d,e;this.options=a,e=this.options;for(b in e)d=e[b],this[b]=d;this.el||(this.el=document.createElement(this.tag)),this.el=$(this.el),this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),c.__super__.constructor.apply(this,arguments)}return j(c,a),c.name="Controller",c.prototype.eventSplitter=/^(\S+)\s*(.*)$/,c.prototype.tag="div",c.include(b),c.prototype.release=function(){return this.el.remove(),this.unbind()},c.prototype.$=function(a){return $(a,this.el)},c.prototype.delegateEvents=function(a){var b,c,d,e,f,g,h=this;g=[];for(c in a)e=a[c],typeof e!="function"&&(e=function(a){return function(){return h[a].apply(h,arguments),!0}}(e)),d=c.match(this.eventSplitter),b=d[1],f=d[2],f===""?g.push(this.el.bind(b,e)):g.push(this.el.delegate(f,b,e));return g},c.prototype.refreshElements=function(){var a,b,c,d;c=this.elements,d=[];for(a in c)b=c[a],d.push(this[b]=this.$(a));return d},c.prototype.html=function(a){return this.el.html(a.el||a),this.refreshElements(),this.el},c.prototype.append=function(){var a,b,c;return b=1<=arguments.length?f.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).append.apply(c,b),this.refreshElements(),this.el},c}(c),d=ColorCanvas.Spine={},d.Controller=a}.call(this),function(a){function k(a,b){if(typeof a=="object"&&a.hasOwnProperty("_tc_id"))return a;var c=l(a),e=c.r,g=c.g,h=c.b,i=j(c.a),k=f(100*i)/100,m=c.format;return e<1&&(e=f(e)),g<1&&(g=f(g)),h<1&&(h=f(h)),{ok:c.ok,format:m,_tc_id:d++,alpha:i,toHsv:function(){var a=p(e,g,h);return{h:a.h*360,s:a.s,v:a.v,a:i}},toHsvString:function(){var a=p(e,g,h),b=f(a.h*360),c=f(a.s*100),d=f(a.v*100);return i==1?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+k+")"},toHsl:function(){var a=n(e,g,h);return{h:a.h*360,s:a.s,l:a.l,a:i}},toHslString:function(){var a=n(e,g,h),b=f(a.h*360),c=f(a.s*100),d=f(a.l*100);return i==1?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+k+")"},toHex:function(){return r(e,g,h)},toHexString:function(){return"#"+r(e,g,h)},toRgb:function(){return{r:f(e),g:f(g),b:f(h),a:i}},toRgbString:function(){return i==1?"rgb("+f(e)+", "+f(g)+", "+f(h)+")":"rgba("+f(e)+", "+f(g)+", "+f(h)+", "+k+")"},toName:function(){return t[r(e,g,h)]||!1},toFilter:function(){var a=r(e,g,h),b=Math.round(j(i)*255).toString(16);return"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+b+a+",endColorstr=#"+b+a+")"},toString:function(a){a=a||this.format;var b=!1;return a==="rgb"&&(b=this.toRgbString()),a==="hex"&&(b=this.toHexString()),a==="name"&&(b=this.toName()),a==="hsl"&&(b=this.toHslString()),a==="hsv"&&(b=this.toHsvString()),b||this.toHexString()}}}function l(a){var b={r:255,g:255,b:255},c=1,d=!1,e=!1;typeof a=="string"&&(a=C(a));if(typeof a=="object"){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))b=m(a.r,a.g,a.b),d=!0,e="rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v"))a.s=A(a.s),a.v=A(a.v),b=q(a.h,a.s,a.v),d=!0,e="hsv";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")){a.s=A(a.s),a.l=A(a.l);var b=o(a.h,a.s,a.l);d=!0,e="hsl"}a.hasOwnProperty("a")&&(c=a.a)}return{ok:d,format:a.format||e,r:g(255,h(b.r,0)),g:g(255,h(b.g,0)),b:g(255,h(b.b,0)),a:c}}function m(a,b,c){return{r:v(a,255)*255,g:v(b,255)*255,b:v(c,255)*255}}function n(a,b,c){a=v(a,255),b=v(b,255),c=v(c,255);var d=h(a,b,c),e=g(a,b,c),f,i,j=(d+e)/2;if(d==e)f=i=0;else{var k=d-e;i=j>.5?k/(2-d-e):k/(d+e);switch(d){case a:f=(b-c)/k+(b<c?6:0);break;case b:f=(c-a)/k+2;break;case c:f=(a-b)/k+4}f/=6}return{h:f,s:i,l:j}}function o(a,b,c){function g(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var d,e,f;a=v(a,360),b=v(b,100),c=v(c,100);if(b==0)d=e=f=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;d=g(i,h,a+1/3),e=g(i,h,a),f=g(i,h,a-1/3)}return{r:d*255,g:e*255,b:f*255}}function p(a,b,c){a=v(a,255),b=v(b,255),c=v(c,255);var d=h(a,b,c),e=g(a,b,c),f,i,j=d,k=d-e;i=d==0?0:k/d;if(d==e)f=0;else{switch(d){case a:f=(b-c)/k+(b<c?6:0);break;case b:f=(c-a)/k+2;break;case c:f=(a-b)/k+4}f/=6}return{h:f,s:i,v:j}}function q(a,b,c){var d,f,g;a=v(a,360)*6,b=v(b,100),c=v(c,100);var h=e.floor(a),i=a-h,j=c*(1-b),k=c*(1-i*b),l=c*(1-(1-i)*b),m=h%6,d=[c,k,j,j,l,c][m],f=[l,c,c,k,j,j][m],g=[j,j,l,c,c,k][m];return{r:d*255,g:f*255,b:g*255}}function r(a,b,c){function d(a){return a.length==1?"0"+a:""+a}var e=[d(f(a).toString(16)),d(f(b).toString(16)),d(f(c).toString(16))];return e[0][0]==e[0][1]&&e[1][0]==e[1][1]&&e[2][0]==e[2][1]?e[0][0]+e[1][0]+e[2][0]:e.join("")}function u(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function v(a,b){y(a)&&(a="100%");var c=z(a);return a=g(b,h(0,j(a))),c&&(a=parseInt(a*b)/100),e.abs(a-b)<1e-6?1:a%b/j(b)}function w(a){return g(1,h(0,a))}function x(a){return parseInt(a,16)}function y(a){return typeof a=="string"&&a.indexOf(".")!=-1&&j(a)===1}function z(a){return typeof a=="string"&&a.indexOf("%")!=-1}function A(a){return a<=1&&(a=a*100+"%"),a}function C(a){a=a.replace(b,"").replace(c,"").toLowerCase();var d=!1;if(s[a])a=s[a],d=!0;else if(a=="transparent")return{r:0,g:0,b:0,a:0};var e;return(e=B.rgb.exec(a))?{r:e[1],g:e[2],b:e[3]}:(e=B.rgba.exec(a))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=B.hsl.exec(a))?{h:e[1],s:e[2],l:e[3]}:(e=B.hsla.exec(a))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=B.hsv.exec(a))?{h:e[1],s:e[2],v:e[3]}:(e=B.hex6.exec(a))?{r:x(e[1]),g:x(e[2]),b:x(e[3]),format:d?"name":"hex"}:(e=B.hex3.exec(a))?{r:x(e[1]+""+e[1]),g:x(e[2]+""+e[2]),b:x(e[3]+""+e[3]),format:d?"name":"hex"}:!1}var b=/^[\s,#]+/,c=/\s+$/,d=0,e=Math,f=e.round,g=e.min,h=e.max,i=e.random,j=a.parseFloat;k.fromRatio=function(a){if(typeof a=="object"){var b={};for(var c in a)b[c]=A(a[c]);a=b}return k(a)},k.equals=function(a,b){return!a||!b?!1:k(a).toHex()==k(b).toHex()},k.random=function(){return k.fromRatio({r:i(),g:i(),b:i()})},k.desaturate=function(a,b){var c=k(a).toHsl();return c.s-=(b||10)/100,c.s=w(c.s),k(c)},k.saturate=function(a,b){var c=k(a).toHsl();return c.s+=(b||10)/100,c.s=w(c.s),k(c)},k.greyscale=function(a){return k.desaturate(a,100)},k.lighten=function(a,b){var c=k(a).toHsl();return c.l+=(b||10)/100,c.l=w(c.l),k(c)},k.darken=function(a,b){var c=k(a).toHsl();return c.l-=(b||10)/100,c.l=w(c.l),k(c)},k.complement=function(a){var b=k(a).toHsl();return b.h=(b.h+180)%360,k(b)},k.triad=function(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+120)%360,s:b.s,l:b.l}),k({h:(c+240)%360,s:b.s,l:b.l})]},k.tetrad=function(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+90)%360,s:b.s,l:b.l}),k({h:(c+180)%360,s:b.s,l:b.l}),k({h:(c+270)%360,s:b.s,l:b.l})]},k.splitcomplement=function(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+72)%360,s:b.s,l:b.l}),k({h:(c+216)%360,s:b.s,l:b.l})]},k.analogous=function(a,b,c){b=b||6,c=c||30;var d=k(a).toHsl(),e=360/c,f=[k(a)];for(d.h=(d.h-(e*b>>1)+720)%360;--b;)d.h=(d.h+e)%360,f.push(k(d));return f},k.monochromatic=function(a,b){b=b||6;var c=k(a).toHsv(),d=c.h,e=c.s,f=c.v,g=[],h=1/b;while(b--)g.push(k({h:d,s:e,v:f})),f=(f+h)%1;return g},k.readable=function(a,b){var c=k(a).toRgb(),d=k(b).toRgb();return(d.r-c.r)*(d.r-c.r)+(d.g-c.g)*(d.g-c.g)+(d.b-c.b)*(d.b-c.b)>10404};var s=k.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},t=k.hexNames=u(s),B=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();a.tinycolor=k}(this),function(){ColorCanvas.Color=function(){function a(a){this.set(tinycolor(a).toRgb())}return a.name="Color",a.White=function(b){return new a({r:255,g:255,b:255,a:b})},a.Black=function(b){return new a({r:0,g:0,b:0,a:b})},a.Transparent=function(){return new a},a.prototype.tinycolor=function(){return tinycolor({r:this.r,g:this.g,b:this.b,a:this.a})},a.prototype.toHex=function(){return"#"+this.tinycolor().toHex().toUpperCase()},a.prototype.toHSV=function(){return this.tinycolor().toHsv()},a.prototype.toHSL=function(){return this.tinycolor().toHsl()},a.prototype.toRGB=function(){var a;return a={r:this.r,g:this.g,b:this.b}},a.prototype.toRGBA=function(){var a;return a={r:this.r,g:this.g,b:this.b,a:this.a}},a.prototype.toPure=function(){var b,c;return b=this.tinycolor().toHsl().h,c=tinycolor({h:b,s:100,l:50}).toRgb(),new a({r:c.r,g:c.g,b:c.b})},a.prototype.isTransparent=function(){return!this.a},a.prototype.set=function(a){return a.r!=null&&(this.r=parseInt(a.r,10)),a.g!=null&&(this.g=parseInt(a.g,10)),a.b!=null&&(this.b=parseInt(a.b,10)),a.a!=null&&(this.a=parseFloat(a.a)),isNaN(this.a)&&(this.a=1),this},a.prototype.clone=function(){return new a(this.toRGB())},a.prototype.toString=function(){return this.a!=null&&this.a!==1?"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")":this.toHex()},a}()}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=ColorCanvas.Color,b=ColorCanvas.Spine,ColorCanvas.Canvas=function(b){function d(){this.drop=c(this.drop,this),this.over=c(this.over,this),d.__super__.constructor.apply(this,arguments),this.canvas=$("<canvas />"),this.canvas.attr({width:this.width,height:this.height}),this.canvas.css({width:this.width,height:this.height}),this.ctx=this.canvas[0].getContext("2d"),this.append(this.canvas)}return e(d,b),d.name="Canvas",d.prototype.width=100,d.prototype.height=100,d.prototype.events={"mousedown canvas":"drag"},d.prototype.val=function(b,c){var d;return d=this.ctx.getImageData(b,c,1,1).data,new a({r:d[0],g:d[1],b:d[2]})},d.prototype.drag=function(a){return this.canvas.mousemove(this.over),$(document).mouseup(this.drop),this.over(a)},d.prototype.over=function(a){var b,c,d;return a.preventDefault(),b=this.canvas.offset(),c=a.pageX-b.left,d=a.pageY-b.top,this.change(this.val(c,d))},d.prototype.change=function(a){return this.color=a,this.trigger("change",this.color)},d.prototype.drop=function(){return this.canvas.unbind("mousemove",this.over),$(document).unbind("mouseup",this.drop)},d.prototype.release=function(){return this.drop(),d.__super__.release.apply(this,arguments)},d}(b.Controller)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};ColorCanvas.Alpha=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new ColorCanvas.Color.Black),this.setColor(this.color)}return b(c,a),c.name="Alpha",c.prototype.className="alpha",c.prototype.width=25,c.prototype.height=215,c.prototype.render=function(){var a;return this.ctx.clearRect(0,0,this.width,this.height),a=this.ctx.createLinearGradient(0,0,0,this.height),a.addColorStop(0,this.color.clone().set({a:0}).toString()),a.addColorStop(1,this.color.clone().set({a:1}).toString()),this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},c.prototype.setColor=function(a){return this.color=a,this.render()},c.prototype.val=function(a,b){var c;return c=this.ctx.getImageData(a,b,1,1).data,this.color.clone().set({a:Math.round(c[3]/255*100)/100})},c.prototype.getCoords=function(a){var b;return a==null&&(a=this.color),b={left:0,top:Math.round(a.a*this.height)}},c.prototype.change=function(a){return this.color=a,this.position.move(this.getCoords()),c.__super__.change.apply(this,arguments)},c}(ColorCanvas.Canvas)}.call(this),function(){this.ColorCanvas||(this.ColorCanvas={}),this.ColorCanvas["picker/views/display"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<div class="controls">\n  <form>\n    <label>\n      <span>R</span>\n      <input type="number" min="0" max="255" name="r" required autofocus>\n    </label>\n\n    <label>\n      <span>G</span>\n      <input type="number" min="0" max="255" name="g" required>\n    </label>\n\n    <label>\n      <span>B</span>\n      <input type="number" min="0" max="255" name="b" required>\n    </label>\n\n    <label>\n      <span>A</span>\n      <input type="number" min="0" max="100" step="1" name="a">%\n    </label>\n\n    <label>\n      <span>Hex</span>\n      <input type="text" name="hex">\n    </label>\n\n    <div class="preview">\n      <div class="inner">\n        &nbsp;\n      </div>\n      <div class="original">\n        &nbsp;\n      </div>\n    </div>\n\n    <footer>\n      <button data-type="cancel">Cancel</button>\n      <button data-type="save" class="right">Save</button>\n    </footer>\n  </form>\n</div>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){var a,b,c,d={}.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=ColorCanvas.Color,b=ColorCanvas.Spine,c=ColorCanvas["picker/views/display"],ColorCanvas.Display=function(b){function d(){d.__super__.constructor.apply(this,arguments),this.color||(this.color=new a),this.render(),this.setColor(this.color)}return e(d,b),d.name="Display",d.prototype.tag="article",d.prototype.elements={"input[name=hex]":"$hex","input[name=r]":"$r","input[name=g]":"$g","input[name=b]":"$b","input[name=a]":"$a",".preview .inner":"$preview",".preview .original":"$original"},d.prototype.events={"change input:not([name=hex])":"changeInput","keyup input[name=hex]":"changeHex","submit form":"changeInput"},d.prototype.render=function(){this.html(c(this));if(this.original)return this.$original.css({background:this.original.toString()})},d.prototype.setColor=function(a){return this.color=a,this.$r.val(this.color.r),this.$g.val(this.color.g),this.$b.val(this.color.b),this.$a.val(Math.round(this.color.a*100)),this.$hex.val(this.color.toHex()),this.$preview.css({background:this.color.toString()})},d.prototype.changeInput=function(b){return b.preventDefault(),this.color=new a({r:this.$r.val(),g:this.$g.val(),b:this.$b.val(),a:parseFloat(this.$a.val())/100}),this.trigger("change",this.color)},d.prototype.changeHex=function(b){return b.preventDefault(),this.color=new a(this.$hex.val()),this.$r.val(this.color.r),this.$g.val(this.color.g),this.$b.val(this.color.b),this.$preview.css({background:this.color.toString()}),this.trigger("change",this.color)},d}(b.Controller)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;a=ColorCanvas.Color,ColorCanvas.Gradient=function(b){function e(){e.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new a.Black),this.setColor(this.color)}return c(e,b),e.name="Gradient",e.prototype.className="gradient",e.prototype.width=250,e.prototype.height=215,e.prototype.setColor=function(a){return this.color=a,this.render()},e.prototype.renderGradient=function(){var a,b,c,e,f,g,h,i,j;f=arguments[0],b=2<=arguments.length?d.call(arguments,1):[],c=(i=this.ctx).createLinearGradient.apply(i,[0,0].concat(d.call(f))),c.addColorStop(0,(j=b.shift())!=null?j.toString():void 0);for(e=g=0,h=b.length;g<h;e=++g)a=b[e],c.addColorStop(e+1/b.length,a.toString());return this.ctx.fillStyle=c,this.ctx.fillRect(0,0,this.width,this.height)},e.prototype.render=function(){var b,c;return this.ctx.clearRect(0,0,this.width,this.height),this.renderGradient([this.width,0],new a.White,new a.White),c=this.color.toPure(),this.renderGradient([this.width,0],c.clone().set({a:0}),c.clone().set({a:1})),b=this.ctx.createLinearGradient(0,0,-6,this.height),b.addColorStop(0,(new a.Black(0)).toString()),b.addColorStop(1,(new a.Black(1)).toString()),this.ctx.fillStyle=b,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},e.prototype.getCoords=function(a){var b,c;return a==null&&(a=this.color),b=a.toHSV(),c={left:Math.round(this.width*b.s),top:Math.round(this.height*(1-b.v))}},e.prototype.change=function(a){return this.color=a,this.position.move(this.getCoords()),e.__super__.change.apply(this,arguments)},e}(ColorCanvas.Canvas)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=ColorCanvas.Spine,ColorCanvas.Position=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.el.css({position:"absolute"})}return c(b,a),b.name="Position",b.prototype.className="position",b.prototype.move=function(a){return this.el.css(a)},b}(a.Controller)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};b=ColorCanvas.Color,a=ColorCanvas.Canvas,ColorCanvas.Spectrum=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new b),this.setColor(this.color)}return d(c,a),c.name="Spectrum",c.prototype.className="spectrum",c.prototype.width=25,c.prototype.height=215,c.prototype.render=function(){var a;return this.ctx.clearRect(0,0,this.width,this.height),a=this.ctx.createLinearGradient(0,0,0,this.height),a.addColorStop(0,"rgb(255,   0,   0)"),a.addColorStop(.16,"rgb(255,   0, 255)"),a.addColorStop(.33,"rgb(0,     0, 255)"),a.addColorStop(.5,"rgb(0,   255, 255)"),a.addColorStop(.67,"rgb(0,   255,   0)"),a.addColorStop(.83,"rgb(255, 255,   0)"),a.addColorStop(1,"rgb(255,   0,   0)"),this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},c.prototype.setColor=function(a){return this.color=a,this.render()},c.prototype.getCoords=function(a){var b,c;return a==null&&(a=this.color),b=a.toHSV(),c={left:0,top:Math.round(this.height*(1-b.h/360))}},c.prototype.change=function(a){return this.color=a,this.position.move(this.getCoords()),c.__super__.change.apply(this,arguments)},c}(a)}.call(this),function(){var a,b,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};f=ColorCanvas.Spine,b=ColorCanvas.Color,d=ColorCanvas.Gradient,e=ColorCanvas.Spectrum,a=ColorCanvas.Alpha,c=ColorCanvas.Display,ColorCanvas.Picker=function(f){function g(){g.__super__.constructor.apply(this,arguments),this.color||(this.color=new b({r:255,g:0,b:0})),this.color instanceof b||(this.color=new b(this.color)),this.original=this.color.clone(),this.render()}return h(g,f),g.name="Picker",g.prototype.className="colorCanvas",g.prototype.events={"click [data-type=cancel]":"cancel"},g.prototype.render=function(){var f=this;return this.el.empty(),this.gradient=new d({color:this.color}),this.spectrum=new e({color:this.color}),this.alpha=new a({color:this.color}),this.display=new c({color:this.color,original:this.original}),this.gradient.bind("change",function(a){return f.color.set(a.toRGB()),f.display.setColor(f.color),f.alpha.setColor(f.color),f.change()}),this.spectrum.bind("change",function(a){var c;return c=f.color.toHSV(),c.h=a.toHSV().h,a=new b(c),f.color.set(a.toRGB()),f.gradient.setColor(f.color),f.display.setColor(f.color),f.alpha.setColor(f.color),f.change()}),this.alpha.bind("change",function(a){return f.color.set({a:a.a}),f.display.setColor(f.color),f.change()}),this.display.bind("change",function(a){return f.color.set(a.toRGBA()),f.gradient.setColor(f.color),f.spectrum.setColor(f.color),f.alpha.setColor(f.color),f.change()}),this.append(this.gradient,this.spectrum,this.alpha,this.display)},g.prototype.cancel=function(a){return a.preventDefault(),this.change(this.original)},g.prototype.change=function(a){return a==null&&(a=this.color),this.trigger("change",a)},g.prototype.release=function(){return g.__super__.release.apply(this,arguments),this.gradient.release(),this.spectrum.release(),this.display.release()},g}(f.Controller)}.call(this);